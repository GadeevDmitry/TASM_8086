#ifndef MOVIE_H
#define MOVIE_H

//================================================================================================================================
// CONST
//================================================================================================================================

extern const int WND_X_SIZE;
extern const int WND_Y_SIZE;

extern "C" void My_printf_stderr(const char *format, ...);

//================================================================================================================================
// physiscs
//================================================================================================================================

struct physics
{
    double  x,  y;
    double vx, vy;
    double ax, ay;

    double x_size;
    double y_size;
};

//================================================================================================================================
// mario
//================================================================================================================================

enum MOVE_DIRECTION
{
    MOVE_LEFT   ,
    MOVE_RIGHT  ,
};

//--------------------------------------------------------------------------------------------------------------------------------

struct mario_world
{
    int x_min, x_max;
    int y_max;

    physics        kinematic;
    MOVE_DIRECTION direction;
};

//--------------------------------------------------------------------------------------------------------------------------------

struct mario_handler
{
    sf::Texture mario_tex;
    sf::Sprite  mario_spr;
    mario_world mario_life;
};

//================================================================================================================================
// render_text
//================================================================================================================================

struct render_text
{
    sf::Font message_font;
    sf::Text message_text;
};

bool render_text_set_message(render_text *const str, const char *const message);

//================================================================================================================================
// render_back
//================================================================================================================================

struct render_back
{
    sf::Texture back_texture;
    sf::Sprite  back_sprite;
};

//================================================================================================================================
// crack_video
//================================================================================================================================

struct crack_video
{
    sf::Music     music;
    render_text   rnd_text;
    render_back   rnd_back;
    mario_handler hero;
};

bool crack_video_ctor        (crack_video *const crack, sf::RenderWindow *const wnd);
bool crack_video_window      (crack_video *const crack, sf::RenderWindow *const wnd, buffer *const bin_code, const char *const out_file);
bool crack_video_progress_bar(crack_video *const crack, sf::RenderWindow *const wnd);

//--------------------------------------------------------------------------------------------------------------------------------
// patch
//--------------------------------------------------------------------------------------------------------------------------------

void patch(crack_video *const crack, sf::RenderWindow *const wnd, buffer *const bin_code, const char *const out_file);

#endif //MOVIE_H